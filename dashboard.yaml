title: Smart Home Dashboard
decluttering_templates:
  common_sidebar:
    card:
      type: vertical-stack
      cards:
        - type: custom:mushroom-entity-card
          entity: sensor.time_date
          primary_info: none
          hold_action:
            action: none
          double_tap_action:
            action: none
          card_mod:
            style:
              .: |
                ha-card {
                  height: 50px !important;
                }
              mushroom-state-info$: |
                .container {
                  --card-primary-font-size: 20px;
                  --card-primary-line-height: 25px;
                  --card-secondary-font-size: 20px;
                  --card-secondary-line-height: 25px;
                }
        - type: weather-forecast
          entity: weather.forecast_home
          forecast_type: daily
          forecast_slots: 5
        - type: grid
          columns: 4
          square: true
          cards:
            - type: custom:button-card
              template: person_card
              entity: person.yoshi
              variables:
                photo: /api/image/serve/e660264008823723d4e1c7ba27a88402/512x512
            - type: custom:button-card
              template: person_card
              entity: person.queen
              variables:
                photo: /api/image/serve/c14c93894c5bd2d915c5c5e9bf6542f1/512x512
            - type: custom:button-card
              template: person_card
              entity: sensor.mamoru_presence
              variables:
                photo: /api/image/serve/415b26a5a7c6123f5742dbb09578cf41/512x512
            - type: custom:button-card
              template: person_card
              entity: person.arashi
              variables:
                photo: /api/image/serve/350a0f5cb85f12118ea1989dc1d5246f/512x512
  room_light:
    variables:
      - entity
      - name
    card:
      type: custom:slider-button-card
      entity: '[[entity]]'
      name: '[[name]]'
      allow_missing_entity: true
      slider:
        direction: left-right
        background: gradient
      action_button:
        mode: toggle
        show: true
      tap_action:
        action: none
      hold_action:
        action: more-info
  room_climate:
    variables:
      - entity
      - name
      - hvac_modes
    card:
      type: custom:stack-in-card
      mode: vertical
      card_mod:
        style: |
          ha-card {
            border: none;
            box-shadow: none;
            background: none;
          }
      cards:
        - type: custom:mushroom-climate-card
          entity: '[[entity]]'
          name: '[[name]]'
          icon: mdi:air-conditioner
          show_temperature_control: true
          collapsible_controls: true
          hvac_modes:
            - cool
            - heat
            - dry
            - 'off'
          card_mod:
            style: |
              ha-card {
                border: none;
                box-shadow: none;
              }
  area_card:
    variables:
      - title
      - cards
      - temperature_entity: null
      - humidity_entity: null
      - occupancy_entity: null
    card:
      type: custom:stack-in-card
      mode: vertical
      card_mod:
        style: |
          ha-card {
            border-radius: 16px;
            border: 1px solid var(--divider-color);
            box-shadow: none;
            padding: 12px;
          }
      cards:
        - type: heading
          heading: '[[title]]'
          heading_style: title
        - type: custom:mushroom-chips-card
          chips:
            - type: entity
              entity: '[[temperature_entity]]'
              icon: mdi:thermometer
              content_info: state
            - type: entity
              entity: '[[humidity_entity]]'
              icon: mdi:water-percent
              content_info: state
            - type: entity
              entity: '[[occupancy_entity]]'
              icon: mdi:motion-sensor
              content_info: none
        - type: vertical-stack
          cards: '[[cards]]'
button_card_templates:
  person_card:
    show_name: false
    show_icon: false
    show_state: false
    aspect_ratio: 1/1
    tap_action:
      action: none
    custom_fields:
      photo: |
        [[[
          const photoUrl = variables.photo;
          const isPresent = entity.state === 'home' || entity.state === 'on';
          const filterStyle = isPresent ? 'none' : 'grayscale(100%) opacity(0.4)';
          return `<img src="${photoUrl}" style="width:100%;height:100%;object-fit:cover;border-radius:50%;filter:${filterStyle};">`;
        ]]]
    styles:
      card:
        - width: 120px
        - height: 120px
        - border-radius: 50%
        - padding: 0
        - overflow: hidden
        - box-shadow: none
        - border: none
      custom_fields:
        photo:
          - position: absolute
          - top: 0
          - left: 0
          - width: 100%
          - height: 100%
views:
  - title: 1F
    path: first_floor
    icon: mdi:home-floor-1
    type: sections
    max_columns: 3
    sections:
      - type: grid
        column_span: 1
        cards:
          - type: custom:stack-in-card
            mode: vertical
            card_mod:
              style: |
                ha-card {
                  border: none;
                  box-shadow: none;
                  background: none;
                }
            cards:
              - type: custom:decluttering-card
                template: common_sidebar
      - type: grid
        column_span: 1
        cards:
          - type: custom:stack-in-card
            mode: vertical
            card_mod:
              style: |
                ha-card {
                  border: none;
                  box-shadow: none;
                  background: none;
                }
            cards:
              - type: heading
                heading: Entrance
              - type: picture-elements
                camera_image: camera.front_door_fluent
                elements:
                  - type: image
                    image: data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7
                    entity: camera.front_door_fluent
                    tap_action:
                      action: more-info
                    style:
                      top: 0%
                      left: 0%
                      width: 200%
                      height: 200%
                      z-index: 1
                  - type: state-icon
                    entity: lock.main_door
                    tap_action:
                      action: toggle
                    style:
                      top: 5%
                      left: 96%
                      transform: translate(-50%, -50%)
                      z-index: 2
                  - type: state-icon
                    entity: binary_sensor.main_door
                    style:
                      top: 15%
                      left: 95%
                      z-index: 2
                    card_mod:
                      style: |
                        :host{
                          --state-binary_sensor-door-on-color: red !important;
                          --state-binary_sensor-door-off-color: #4CAF50 !important;
                          --mdc-icon-size: 27px;
                          background: none !important;
                        }
                  - type: state-icon
                    entity: sensor.main_door_battery
                    style:
                      top: 25%
                      left: 96%
                      z-index: 2
      - type: grid
        column_span: 1
        cards:
          - type: vertical-stack
            cards:
              - type: custom:decluttering-card
                template: area_card
                variables:
                  - title: Office 1
                  - temperature_entity: sensor.office_1_climate_sensor_temperature
                  - humidity_entity: sensor.office_1_climate_sensor_humidity
                  - occupancy_entity: binary_sensor.office_1_presence_sensor_occupancy
                  - cards:
                      - type: custom:decluttering-card
                        template: room_light
                        variables:
                          - entity: light.office_light_1
                          - name: Light
                      - type: custom:decluttering-card
                        template: room_climate
                        variables:
                          - entity: climate.office_ac_1
                          - name: AC
              - type: custom:decluttering-card
                template: area_card
                variables:
                  - title: Guest Bedroom
                  - cards:
                      - type: custom:decluttering-card
                        template: room_light
                        variables:
                          - entity: light.guest_bedroom_light
                          - name: Light
                      - type: custom:decluttering-card
                        template: room_climate
                        variables:
                          - entity: climate.guest_bedroom_ac
                          - name: AC
              - type: custom:decluttering-card
                template: area_card
                variables:
                  - title: Bathroom
                  - cards:
                      - type: custom:decluttering-card
                        template: room_light
                        variables:
                          - entity: light.bathroom_light
                          - name: Light
  - title: 2F
    path: second_floor
    icon: mdi:home-floor-2
    type: sections
    max_columns: 3
    sections:
      - type: grid
        column_span: 1
        cards:
          - type: custom:stack-in-card
            mode: vertical
            card_mod:
              style: |
                ha-card {
                  border: none;
                  box-shadow: none;
                  background: none;
                }
            cards:
              - type: custom:decluttering-card
                template: common_sidebar
      - type: grid
        cards:
          - type: custom:stack-in-card
            mode: vertical
            cards:
              - type: picture-elements
                camera_image: camera.living_room_camera_fluent
                elements:
                  - type: image
                    image: data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7
                    entity: camera.living_room_camera_fluent
                    tap_action:
                      action: more-info
                    style:
                      top: 0%
                      left: 0%
                      width: 200%
                      height: 200%
              - type: custom:decluttering-card
                template: room_climate
                variables:
                  - entity: climate.main_ac
                  - name: Main AC
              - type: custom:decluttering-card
                template: room_light
                variables:
                  - entity: light.main_light
                  - name: Main Light
              - type: custom:decluttering-card
                template: room_light
                variables:
                  - entity: light.kitchen_lights
                  - name: Kitchen Lights
              - type: custom:decluttering-card
                template: room_light
                variables:
                  - entity: light.dining_lights
                  - name: Dining Lights
              - type: custom:mushroom-media-player-card
                entity: media_player.tv
                name: TV
                icon: mdi:television
                use_media_info: false
                show_volume_level: true
                show_source: true
                volume_controls:
                  - volume_set
                  - volume_mute
                media_controls:
                  - on_off
                  - play_pause
                collapsible_controls: true
      - type: grid
        column_span: 1
        cards:
          - type: custom:xiaomi-vacuum-map-card
            title: The Guardian
            preset_name: Live map
            entity: vacuum.roborock_s7_maxv
            map_source:
              camera: image.roborock_s7_maxv_map_0_custom
            calibration_source:
              camera: true
            map_modes:
              - template: vacuum_clean_zone
              - template: vacuum_clean_zone_predefined
                predefined_selections:
                  - zones:
                      - - 21000
                        - 22600
                        - 23750
                        - 28000
                      - - 23750
                        - 22600
                        - 26500
                        - 25800
                    label:
                      text: Living room
                      x: 22350
                      'y': 26000
                      offset_y: 35
                    icon:
                      name: mdi:sofa
                      x: 22350
                      'y': 26000
                  - zones:
                      - - 23750
                        - 26500
                        - 26500
                        - 28000
                    label:
                      text: Kitchen
                      x: 25125
                      'y': 27250
                      offset_y: 35
                    icon:
                      name: mdi:stove
                      x: 25125
                      'y': 27250
              - template: vacuum_goto
              - template: vacuum_follow_path
  - title: 3F
    path: third_floor
    icon: mdi:home-floor-3
    type: sections
    max_columns: 3
    sections:
      - type: grid
        column_span: 1
        cards:
          - type: custom:stack-in-card
            mode: vertical
            card_mod:
              style: |
                ha-card {
                  border: none;
                  box-shadow: none;
                  background: none;
                }
            cards:
              - type: custom:decluttering-card
                template: common_sidebar
      - type: grid
        column_span: 1
        cards:
          - type: custom:stack-in-card
            mode: vertical
            card_mod:
              style: |
                ha-card {
                  border: none;
                  box-shadow: none;
                  background: none;
                }
            cards:
              - type: heading
                heading: Master Bedroom
              - type: picture-elements
                camera_image: camera.bedroom_camera_fluent
                elements:
                  - type: image
                    image: data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7
                    entity: camera.bedroom_camera_fluent
                    tap_action:
                      action: more-info
                    style:
                      top: 0%
                      left: 0%
                      width: 200%
                      height: 200%
              - type: custom:decluttering-card
                template: room_light
                variables:
                  - entity: light.bedroom_light
                  - name: Light
              - type: custom:decluttering-card
                template: room_climate
                variables:
                  - entity: climate.bedroom_ac
                  - name: AC
      - type: grid
        column_span: 1
        cards:
          - type: custom:decluttering-card
            template: area_card
            variables:
              - title: Queen's Chamber
              - cards:
                  - type: custom:decluttering-card
                    template: room_light
                    variables:
                      - entity: light.office_light_2
                      - name: Light
                  - type: custom:decluttering-card
                    template: room_climate
                    variables:
                      - entity: climate.office_ac_2
                      - name: AC
                  - type: custom:mushroom-media-player-card
                    entity: media_player.queen_s_chamber_wifi
                    name: Nest Point
                    icon: mdi:speaker
                    use_media_info: true
                    show_volume_level: true
                    volume_controls:
                      - volume_set
                      - volume_mute
                    media_controls:
                      - play_pause
                    collapsible_controls: true

